<!-- app/views/messages/index.html.erb -->
<%= stylesheet_link_tag "whatsapp", "data-turbo-track": "reload" %>
<h2>Chat with <%= @conversation.other_user(current_user).username %></h2>
<p><%= button_to 'Logout', destroy_board_member_session_path, method: :delete %></p>

<div id="messages" style="padding-bottom: 150px;">
  <% @messages.each do |message| %>
    <%= render partial: 'message', locals: { message: message } %>
  <% end %>
</div>

<div style="position: fixed; bottom: 0; left: 0; right: 0; background: #fff; height: 100px; box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1); padding: 10px;">
  <%= form_with(model: [ @conversation, Message.new ], local: false, remote: true) do |form| %>
    <%= form.hidden_field :conversation_id, value: @conversation.id %>
    <div class="form-group">
      <%= form.text_area :body, class: "form-control", placeholder: "Type a message...", rows: 3 %>
    </div>
    <%= form.submit "Send", class: "btn btn-primary" %>
  <% end %>
</div>
