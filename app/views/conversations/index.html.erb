<!DOCTYPE html>
<html>
<head>
  <title>Asdf</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <%= stylesheet_link_tag "dashboard", "data-turbo-track": "reload" %>
  <%= javascript_importmap_tags %>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="styles.css"> <!-- Link to your CSS file -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  
  <style>
  body {
      margin: 0;
      padding: 0;
      background-color: white;
  }
  /* Basic styling for the navbar */
.navbar {
  position: fixed;
  top: 0;
  right: 0;
  width: 100%;
  height:60px;
  display: flex;
  justify-content: space-between; /* Space between title and icons */
  align-items: center;
  background-color: #f8f9fa;
  padding: 10px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  z-index: 1000;
}

/* Styling for the dropdown container */
.dropdown {
  position: relative;
  display: inline-block;
}

/* Styling for the dropdown toggle button */
.dropdown-toggle {
  cursor: pointer;
  display: flex; /* Ensure SVG is displayed correctly */
  align-items: center;
  justify-content: center;
  background: none; /* Remove any background */
  border: none; /* Remove border */
  padding: 0; /* Remove padding */
}

/* Dropdown menu styling */
.dropdown-menu {
  display: none;
  position: absolute;
  top: 100%;
  right: 0; /* Align dropdown menu with the right edge */
  background-color: #ffffff;
  border: 1px solid #ddd;
  border-radius: 4px;
  list-style: none;
  padding: 0;
  margin: 0;
  min-width: 200px; /* Increased width */
  max-width: 300px; /* Max width to prevent overflow */
  max-height: 300px; /* Max height with scroll */
  overflow-y: auto; /* Scrollable if content exceeds max height */
  z-index: 1000;
}

/* Dropdown menu item styling */
.dropdown-menu li {
  padding: 10px;
}

/* Link styling inside dropdown menu */
.dropdown-menu li a {
  text-decoration: none;
  color: #333;
  display: block;
}

/* Highlight on hover */
.dropdown-menu li:hover {
  background-color: #f1f1f1;
}

  

.navbar-title {
  margin: 0; /* Remove default margin */
  font-size: 1.5rem; /* Adjust font size as needed */
  color: #333; /* Set text color */
}

.navbar-icons {
  display: flex;
  gap: 10px; /* Space between icons */
}
    
    .bi {
      vertical-align: middle; /* Aligns icons vertically in relation to each other */
    }
   
    .navbar h3 {
  margin: 0; /* Remove default margin */
  padding: 0; /* Remove default padding */
  font-size: 1.5rem; /* Adjust font size as needed */
  color: Green;
  font-weight: bold; /* Make the text bold */
  justify-content: flex-start;
 
}
.footer {
  height:60px;
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  display: flex;
  justify-content: space-around; /* Evenly distributes the icons */
  background-color: #f8f9fa; /* Background color for the footer */
  padding: 10px; /* Padding for the footer */
  box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1); /* Optional: adds a shadow effect */
  z-index: 1000; /* Ensure the footer is above other content */
}

.footer-icons {
  display: flex; /* Ensures icons are in a row */
  justify-content: space-around; /* Evenly distributes the icons */
  width: 100%; /* Make sure it spans the full width */
}

.footer-icons a {
  display: flex;
  align-items: center; /* Center icons vertically */
  justify-content: center; /* Center icons horizontally within each flex item */
  text-align:center;
  text-decoration: none;
  flex-direction: column; 
}

.navbar-icons a svg {
  width: 30px; /* Set width for the icon */
  height: 30px; /* Set height for the icon */
}

.footer-icons a svg {
  width: 30px; /* Set width for the icon */
  height: 30px; /* Set height for the icon */
}
.footer-icons svg {
  max-height: 90px; /* Maximum height for the icons */
  width: auto; /* Allows width to adjust based on height */
  height: auto; /* Allows height to adjust automatically */
  color: #000; /* Color for the icons */
}
.footer-icons a span {
   /* Space between the icon and the text */
  color: black; /* Set text color (adjust as needed) */
  font-size:12px;
}
.list-group {
  padding-left: 0; /* Remove padding on the left side of the list group */
}

.list-group-item {
  height: 80px; /* Set the height of the list group item */
  display: flex;
  align-items: flex-start; /* Align items to the top */
  position: relative; /* Allow absolute positioning of timestamp */
  padding-left: 0; /* Remove padding from the list group item */
  margin-left: 0; /* Remove margin from the list group item */
  border: none; /* Optional: Remove border if any */
}

.list-group-item img {
  margin-right: 10px; /* Space between the image and the text */
  margin-left: 0; /* Ensure there's no left margin */
}

.list-group-item .info {
  display: flex;
  flex-direction: column;
  justify-content: space-between; /* Space between name and description */
  width: 100%; /* Ensure it uses full width available */
}

.list-group-item h5 {
  margin: 0; /* Remove default margin */
  display: inline-block;
  font-size: 25px;
}

.list-group-item .text-body-secondary {
  position: absolute; /* Position it absolutely */
  top: 10px; /* Space from the top */
  right: 1px; /* Space from the right */
  font-size: 0.875rem; /* Optional: Adjust font size */
  color: #6c757d; /* Optional: Adjust text color */
}

.list-group-item p {
  margin: 0;
  margin-top: 5px;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 1; /* Number of lines to show */
  -webkit-box-orient: vertical;
}

</style>
</head>
<body>
<nav class="navbar">
  <h3 class="navbar-title">WhatsApp</h3>
  <div class="navbar-icons">
  <a href="https://example.com/camera" target="_blank" aria-label="Camera">
  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-camera" viewBox="0 0 16 16">
    <path d="M15 12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.172a3 3 0 0 0 2.12-.879l.83-.828A1 1 0 0 1 6.827 3h2.344a1 1 0 0 1 .707.293l.828.828A3 3 0 0 0 12.828 5H14a1 1 0 0 1 1 1zM2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4z"/>
    <path d="M8 11a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5m0 1a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7M3 6.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0"/>
  </svg>
</a>
    


    <div class="dropdown">
      <a href="#" class="dropdown-toggle" id="dropdownToggle">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
      <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0"/>
      <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z"/>
    </svg>
      </a>
      <ul class="dropdown-menu" id="dropdownMenu">
      <div class="d-grid gap-2">
      <button class="btn btn-primary" type="button">Button</button>
      <button class="btn btn-primary" type="button">Button</button>
      <%= button_to 'Logout', destroy_board_member_session_path, method: :delete %>
      <%= button_to 'Edit User Info', edit_user_info_path, method: :get %>

    </div>
    
      </ul>
    </div>
  </div>
</nav>
<div class="d-grid gap-2">
  <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasScrolling" aria-controls="offcanvasScrolling">Start a New Conversation</button>
</div>



<div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="offcanvasScrolling" aria-labelledby="offcanvasScrollingLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasScrollingLabel">Start a Conversation</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <%= form_with url: conversations_path, method: :post do |f| %>
      <div class="mb-3">
        <%= f.label :phone_number, "Enter recipient's phone number:", class: "form-label" %>
        <%= f.text_field :phone_number, class: "form-control" %>
      </div>
      <%= f.submit "Start Conversation", class: "btn btn-primary" %>
    <% end %>
    <%= form_with url: conversations_path, method: :post do |f| %>
  <%= f.hidden_field :sender_id, value: current_user.id %>
  <%= f.collection_select :recipient_id, User.where.not(id: current_user.id), :id, :email, prompt: 'Select a recipient' %>
<% end %>
<div class="list-group">
  <ul style="list-style: none; padding-left: 0; margin-left: 0;"> <!-- Remove default list padding -->
    <% @conversations.each do |conversation| %>
      <% most_recent_message = conversation.messages.order(created_at: :desc).first %>
      <%= link_to conversation_messages_path(conversation), class: 'list-group-item list-group-item-action' do %>
        <%= image_tag 'ali.JPG', alt: 'Ali', width: 50, height: 50, class: 'rounded-circle' %>
        <div class="info">
          <h5 class="mb-1"><b><%= conversation.other_user(current_user).username %></b></h5>
        </div>
      <% end %>
    <% end %>
  </ul>
</div>

  </div>
</div>


<div class="list-group">
  <ul style="list-style: none; padding-left: 0; margin-left: 0;"> <!-- Remove default list padding -->
    <% @conversations.each do |conversation| %>
      <% most_recent_message = conversation.messages.order(created_at: :desc).first %>
      <%= link_to conversation_messages_path(conversation), class: 'list-group-item list-group-item-action' do %>
        <% if conversation.other_user(current_user).photo.attached? %>
  <%= image_tag conversation.other_user(current_user).photo.variant(resize_to_fill: [50, 50]), alt: conversation.other_user(current_user).username, class: 'rounded-circle' %>
<% else %>
  <%= image_tag 'ali.JPG', alt: 'Ali', width: 50, height: 50, class: 'rounded-circle' %>
<% end %>

        <div class="info">
          <h5 class="mb-1"><b><%= conversation.other_user(current_user).username %></b></h5>
          <p style="font-size: 0.75rem; color: #666; margin: 0;">
          <% if most_recent_message.present? %>
            <%= truncate(most_recent_message.body, length: 100) %>
          <% else %>
            <span style="font-size: 0.75rem; color: #666;">- - - - - - - - - - </span>
          <% end %>
        </p>
        </div>
        <small class="text-body-secondary">3 days ago</small>
      <% end %>
    <% end %>
  </ul>
</div>

<footer class="footer">
  <div class="footer-icons">
  <a href="https://example.com/facebook" target="_blank" aria-label="Facebook">
  <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-chat-right-text" viewBox="0 0 16 16">
    <path d="M2 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9.586a2 2 0 0 1 1.414.586l2 2V2a1 1 0 0 0-1-1zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2z"/>
    <path d="M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6m0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5"/>
  </svg>
  <span>Chats</span>
</a>
<a href="https://example.com/facebook" target="_blank" aria-label="Facebook">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-quote" viewBox="0 0 16 16">
  <path d="M2.678 11.894a1 1 0 0 1 .287.801 11 11 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8 8 0 0 0 8 14c3.996 0 7-2.807 7-6s-3.004-6-7-6-7 2.808-7 6c0 1.468.617 2.83 1.678 3.894m-.493 3.905a22 22 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a10 10 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105"/>
  <path d="M7.066 6.76A1.665 1.665 0 0 0 4 7.668a1.667 1.667 0 0 0 2.561 1.406c-.131.389-.375.804-.777 1.22a.417.417 0 0 0 .6.58c1.486-1.54 1.293-3.214.682-4.112zm4 0A1.665 1.665 0 0 0 8 7.668a1.667 1.667 0 0 0 2.561 1.406c-.131.389-.375.804-.777 1.22a.417.417 0 0 0 .6.58c1.486-1.54 1.293-3.214.682-4.112z"/>
</svg>
  <span>Updates</span>
</a>
<a href="https://example.com/facebook" target="_blank" aria-label="Facebook">
<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-chat-right-text" viewBox="0 0 16 16">
  <path d="M2 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9.586a2 2 0 0 1 1.414.586l2 2V2a1 1 0 0 0-1-1zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2z"/>
  <path d="M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6m0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5"/>
</svg>
<span>Communities</span>
</a>
<a href="https://example.com/facebook" target="_blank" aria-label="Facebook">
  <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-chat-right-text" viewBox="0 0 16 16">
    <path d="M2 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9.586a2 2 0 0 1 1.414.586l2 2V2a1 1 0 0 0-1-1zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2z"/>
    <path d="M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6m0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5"/>
  </svg>
  <span>Calls</span>
</a>
  </div>
</footer>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const dropdownToggle = document.getElementById('dropdownToggle');
  const dropdownMenu = document.getElementById('dropdownMenu');

  dropdownToggle.addEventListener('click', function(event) {
    event.stopPropagation(); // Prevent click event from closing the dropdown immediately
    const isVisible = dropdownMenu.style.display === 'block';
    dropdownMenu.style.display = isVisible ? 'none' : 'block';
    adjustDropdownPosition();
  });

  document.addEventListener('click', function(event) {
    if (!dropdownToggle.contains(event.target) && !dropdownMenu.contains(event.target)) {
      dropdownMenu.style.display = 'none';
    }
  });

  function adjustDropdownPosition() {
    const rect = dropdownMenu.getBoundingClientRect();
    const isOverflowingLeft = rect.left < 0;
    const isOverflowingRight = rect.right > window.innerWidth;
    
    if (isOverflowingLeft) {
      dropdownMenu.style.left = '0'; // Reset position to keep it within screen
      dropdownMenu.style.right = '0'; // Align to the right edge of the dropdown container
    } else if (isOverflowingRight) {
      dropdownMenu.style.left = 'auto';
      dropdownMenu.style.right = '0'; // Ensure it stays within the right edge of the viewport
    } else {
      dropdownMenu.style.left = '0'; // Default positioning
      dropdownMenu.style.right = 'auto';
    }
  }
});

</script>
</body>
</html>
